(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2586],{50941:function(e,t,n){Promise.resolve().then(n.bind(n,51122))},51122:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var u=n(27573),i=n(94354),a=n(54603),s=n(7653),r=n(16096);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(e.length<=t)return e;let n=Math.ceil(t/2);return"".concat(e.substring(0,n),"\n\n  [...]\n\n  ").concat(e.substring(e.length-n))}var c=n(11925),o=n(75763),d=n(17179),f=n(2715),m=n(96391);function g(e){var t;let{conversationUUID:n,isFirstChat:g,chatInputDefaultMessage:v}=e,{currentPath:h,data:_,isLoading:p,isPreviousData:C}=(0,i._C)(n),{changeDisplayedConversationPath:j}=(0,o.p)(),x=(0,c.pV)(n),S=(0,c.lE)(n),{mutate:D}=(0,i.jl)(n),b=x.isStreaming||S.isStreaming,E=x.runStream;!function(e,t){let[n,u]=(0,s.useState)(!1),{activeOrganization:a}=(0,r.useCurrentAccount)(),c=e?e.uuid:"",{mutate:o}=(0,i.W)(c),{mutate:d,error:f}=(0,i.j7)(c),m=(0,s.useRef)(!1);(0,s.useEffect)(()=>{var t,n;if(!f||(null==e?void 0:e.name))return;let u=null==e?void 0:null===(n=e.chat_messages)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.text;if(u){if(m.current)return;let e=u.slice(0,30),t=u.length>30?"...":"";m.current=!0,o({name:"\uD83D\uDCAC ".concat(e).concat(t)})}},[f,e,o]),(0,s.useEffect)(()=>{if(t||n||(null==e?void 0:e.name))return;let i=null==e?void 0:e.chat_messages;if(!i||i.length<2||0===i[1].text.length)return;let s=["Message 1:",l(i[0].text),"Message 2:",l(i[1].text)].join("\n\n");a&&(u(!0),d({message_content:s,recent_titles:[]}))},[t,n,e,a,d])}(_,b);let k=(0,s.useCallback)(async(e,t)=>{await E({prompt:t,attachments:[],files:[],parent_message_uuid:e.parent_message_uuid})},[E]),M=(0,s.useCallback)((e,t)=>{j(n,e,t,e=>D({current_leaf_message_uuid:e}))},[j,n,D]);if(!_){if(p||C)return(0,u.jsx)("div",{className:"fixed inset-0 grid place-items-center",children:(0,u.jsx)(f.Z,{})});(0,a.notFound)()}return(0,u.jsx)(d.I,{settings:_.settings||{},children:(0,u.jsx)(m.Z,{isFirstChat:g,isStreaming:b,chatInputDefaultMessage:v,conversationUUID:n,messages:h,name:null!==(t=null==_?void 0:_.name)&&void 0!==t?t:"Untitled Chat",onSend:x.runStream,onRetry:S.runStream,projectUuid:null==_?void 0:_.project_uuid,changeDisplayedConversationPath:M,editMessage:k})})}function v(e){var t;let{params:{uuid:n}}=e,r=(0,a.useSearchParams)(),l=null==r?void 0:r.get("q"),{data:c}=(0,i.QR)(),o=null==c?void 0:null===(t=c.find(e=>e.uuid===n))||void 0===t?void 0:t.name;return(0,s.useEffect)(()=>{let e=document.title;return o&&(document.title="".concat(o," - Claude")),()=>{document.title=e}},[o]),(0,u.jsx)(g,{conversationUUID:n,isFirstChat:1>=((null==c?void 0:c.length)||0),chatInputDefaultMessage:null!=l?l:void 0})}}},function(e){e.O(0,[2044,7611,248,2645,3040,7992,789,2171,6895,3688,3051,5731,4145,7486,8618,3674,1911,9367,4592,1875,3211,6807,6464,1898,8607,254,9840,2219,3292,4354,2673,9058,483,8387,6391,1293,1362,8114,1744],function(){return e(e.s=50941)}),_N_E=e.O()}]);